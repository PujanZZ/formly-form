<mat-card style="margin-top: 20px">
  <mat-card-content>
    <form [formGroup]="form">
      <div class="container">
        <div class="left">
          <mat-form-field appearance="fill">
            <mat-label>Select</mat-label>
            <mat-select formControlName="multi_select">
              <mat-option *ngFor="let l of listInput" [value]="l">{{
                l
              }}</mat-option>
            </mat-select>
          </mat-form-field>

          <!-- <mat-radio-group
            aria-label="Select an option"
            formControlName="is_required"
          >
            <mat-radio-button value="false">Required</mat-radio-button>
            <mat-radio-button value="true">Not Required</mat-radio-button>
          </mat-radio-group> -->

          <ng-container (ngSubmit)="submit(model)">
            <mat-checkbox formControlName="is_checked"
              >Is Required?</mat-checkbox
            ></ng-container
          >

          <mat-divider></mat-divider>
          <mat-divider></mat-divider>
          <mat-divider></mat-divider>
          <br />
          <br />
          <div class="seldiv">
            <!-- <ng-container>
              <mat-form-field appearance="fill">
                <mat-label>Input Field</mat-label>
                <input matInput formControlName="field_type" />
              </mat-form-field>
            </ng-container> -->

            <!-- <ng-container
              *ngIf="form.controls['multi_select'].value.includes('textarea')"
            >
              <mat-form-field appearance="fill">
                <mat-label>Textarea Field</mat-label>
                <textarea matInput formControlName="textareaField"></textarea>
              </mat-form-field>
            </ng-container>

            <ng-container
              *ngIf="form.controls['multi_select'].value.includes('selector')"
            >
              <mat-form-field appearance="fill">
                <mat-label>Cars</mat-label>
                <mat-select matNativeControl>
                  <mat-option value="1">Volvo</mat-option>
                  <mat-option value="2">test</mat-option>
                  <mat-option value="2">test2</mat-option>
                </mat-select>
              </mat-form-field>
            </ng-container>

            <ng-container
              *ngIf="form.controls['multi_select'].value.includes('radio')"
            >
              <mat-radio-group aria-label="Select an option">
                <mat-radio-button value="1">Option 1</mat-radio-button>
                <mat-radio-button value="2">Option 2</mat-radio-button>
              </mat-radio-group>
            </ng-container> -->
          </div>
        </div>
        <div class="right">
          <div formArrayName="option">
            <div *ngFor="let opt of option.controls; let i = index">
              <mat-form-field appearance="fill">
                <mat-label>Option {{ i + 1 }}:</mat-label>
                <input [formControlName]="i" type="text" matInput />
              </mat-form-field>
              <button
                style="margin: 5px"
                mat-raised-button
                color="warn"
                (click)="removeOptions(i)"
              >
                Remove Option
              </button>
            </div>
            <button mat-raised-button color="primary" (click)="addOptions()">
              Add New Field
            </button>
          </div>
        </div>
      </div>
    </form>
  </mat-card-content>
</mat-card>

<hr />

<mat-card>
  <mat-card-content>
    <h2>Preview</h2>
    <form [formGroup]="form" (ngSubmit)="submit(model)">
      <ng-container
        *ngIf="form.controls['multi_select'].value.includes('input')"
      >
        <formly-form
          [model]="model"
          [fields]="fields"
          [options]="options"
          [form]="form"
        >
          <button type="submit" mat-button color="accent">Submit</button>
        </formly-form>
      </ng-container>
    </form>

    <button (click)="submit(model)" mat-raised-button color="primary">
      Accept
    </button>
  </mat-card-content>
</mat-card>
